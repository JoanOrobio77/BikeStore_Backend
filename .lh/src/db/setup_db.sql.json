{
    "sourceFile": "src/db/setup_db.sql",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1743974946710,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1743978591149,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,62 +1,62 @@\n DROP DATABASE IF EXISTS Bike_Store;\r\n-CREATE DATABASE Bike_Store;\r\n+CREATE DATABASE Bike_Store CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;\r\n USE Bike_Store;\r\n \r\n create table rol(\r\n     id_rol int primary key auto_increment,\r\n-    nombre_rol varchar(50)\r\n+    nombre_rol varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL\r\n );\r\n \r\n CREATE TABLE Usuarios(\r\n     id_usuario INT auto_increment primary key,\r\n-    nombre varchar (50),\r\n-    telefono varchar (20),\r\n-    email varchar (100),\r\n-    contrasena varchar (500),\r\n-    id_rol INT,\r\n+    nombre varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,\r\n+    telefono varchar(20) NOT NULL,\r\n+    email varchar(100) NOT NULL,\r\n+    contrasena varchar(500) NOT NULL,\r\n+    id_rol INT NOT NULL,\r\n     foreign key (id_rol) references rol(id_rol)\r\n );\r\n \r\n create table Categoria (\r\n     id_categoria INT auto_increment primary key,\r\n-    nombre_categoria varchar (40)\r\n+    nombre_categoria varchar(40) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL\r\n );\r\n \r\n create table Producto (\r\n     id_producto INT auto_increment primary key,\r\n-    nombre_producto varchar (100),\r\n-    descripcion TEXT,\r\n-    precio decimal(10,2),\r\n+    nombre_producto varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,\r\n+    descripcion TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL,\r\n+    precio decimal(10,2) NOT NULL,\r\n     imagen MEDIUMBLOB,\r\n-    id_categoria INT,\r\n+    id_categoria INT NOT NULL,\r\n     foreign key (id_categoria) references Categoria(id_categoria)\r\n );\r\n \r\n Create table Stock (\r\n     id_stock int auto_increment primary key,\r\n-    id_producto INT,\r\n-    cantidad int,\r\n-    fecha_ingreso date, \r\n+    id_producto INT NOT NULL,\r\n+    cantidad int NOT NULL DEFAULT 0,\r\n+    fecha_ingreso date NOT NULL, \r\n     fecha_salida date,\r\n     foreign key (id_producto) references Producto(id_producto)\r\n );\r\n \r\n create table Ventas (\r\n     id_venta INT auto_increment primary key,\r\n-    fecha_venta date,\r\n-    id_usuario INT,\r\n-    total decimal(10,2),\r\n+    fecha_venta date NOT NULL,\r\n+    id_usuario INT NOT NULL,\r\n+    total decimal(10,2) NOT NULL,\r\n     foreign key (id_usuario) references Usuarios(id_usuario)\r\n );\r\n \r\n create table Detalle_Venta (\r\n     id_detalle_venta INT auto_increment primary key,\r\n-    id_venta INT,\r\n-    id_producto INT,\r\n-    cantidad INT,\r\n-    precio_unitario decimal(10,2),\r\n-    subtotal decimal(10,2),\r\n+    id_venta INT NOT NULL,\r\n+    id_producto INT NOT NULL,\r\n+    cantidad INT NOT NULL,\r\n+    precio_unitario decimal(10,2) NOT NULL,\r\n+    subtotal decimal(10,2) NOT NULL,\r\n     foreign key (id_venta) references Ventas(id_venta),\r\n     foreign key (id_producto) references Producto(id_producto)\r\n );\r\n \r\n"
                }
            ],
            "date": 1743974946710,
            "name": "Commit-0",
            "content": "DROP DATABASE IF EXISTS Bike_Store;\r\nCREATE DATABASE Bike_Store;\r\nUSE Bike_Store;\r\n\r\ncreate table rol(\r\n    id_rol int primary key auto_increment,\r\n    nombre_rol varchar(50)\r\n);\r\n\r\nCREATE TABLE Usuarios(\r\n    id_usuario INT auto_increment primary key,\r\n    nombre varchar (50),\r\n    telefono varchar (20),\r\n    email varchar (100),\r\n    contrasena varchar (500),\r\n    id_rol INT,\r\n    foreign key (id_rol) references rol(id_rol)\r\n);\r\n\r\ncreate table Categoria (\r\n    id_categoria INT auto_increment primary key,\r\n    nombre_categoria varchar (40)\r\n);\r\n\r\ncreate table Producto (\r\n    id_producto INT auto_increment primary key,\r\n    nombre_producto varchar (100),\r\n    descripcion TEXT,\r\n    precio decimal(10,2),\r\n    imagen MEDIUMBLOB,\r\n    id_categoria INT,\r\n    foreign key (id_categoria) references Categoria(id_categoria)\r\n);\r\n\r\nCreate table Stock (\r\n    id_stock int auto_increment primary key,\r\n    id_producto INT,\r\n    cantidad int,\r\n    fecha_ingreso date, \r\n    fecha_salida date,\r\n    foreign key (id_producto) references Producto(id_producto)\r\n);\r\n\r\ncreate table Ventas (\r\n    id_venta INT auto_increment primary key,\r\n    fecha_venta date,\r\n    id_usuario INT,\r\n    total decimal(10,2),\r\n    foreign key (id_usuario) references Usuarios(id_usuario)\r\n);\r\n\r\ncreate table Detalle_Venta (\r\n    id_detalle_venta INT auto_increment primary key,\r\n    id_venta INT,\r\n    id_producto INT,\r\n    cantidad INT,\r\n    precio_unitario decimal(10,2),\r\n    subtotal decimal(10,2),\r\n    foreign key (id_venta) references Ventas(id_venta),\r\n    foreign key (id_producto) references Producto(id_producto)\r\n);\r\n\r\n-- Insertar roles\r\nINSERT INTO rol (nombre_rol) VALUES ('Administrador');\r\nINSERT INTO rol (nombre_rol) VALUES ('Usuario');\r\n\r\n-- Insertar usuario administrador (contraseña: admin123)\r\nINSERT INTO Usuarios (nombre, telefono, email, contrasena, id_rol) \r\nVALUES ('Administrador', '123456789', 'admin@bikestore.com', '$2a$10$GxlEVHQQZWXs1KoHtHBQF.8HQ9Ld9SEPwqwXd3pYoLhqnL/6SCYxq', 1);\r\n\r\n-- Insertar categorías\r\nINSERT INTO Categoria (nombre_categoria) VALUES ('Mountain Bike');\r\nINSERT INTO Categoria (nombre_categoria) VALUES ('Bicicleta de Ruta');\r\nINSERT INTO Categoria (nombre_categoria) VALUES ('Bicicleta Urbana');\r\nINSERT INTO Categoria (nombre_categoria) VALUES ('Bicicleta para Niños'); "
        }
    ]
}